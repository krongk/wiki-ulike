{% assign default_hero_image = 'images/hero.jpg' | asset_url %}
{% assign default_icon = 'images/icon.svg' | asset_url %}
{% assign header_menus = site.settings.header_menu | newline_to_br | split: '<br />' %}
{% assign hot_tags = page.settings.hot_tags | split: ',' %}
{% assign screen_width = 'max-w-screen-xl' %}
{% assign card_pages = site.pages['/'].children_in_nav_menu  | limit: 24 %}

<!--prepare class for yarn build -->
<div class="mx-auto max-w-screen-lg"></div>
<div class="mx-auto max-w-screen-xl"></div>
<div class="mx-auto max-w-screen-2xl"></div>

<!-- Feature One Section -->
{% if site.settings.features_one %}
  {{ site.settings.features_one }}
{% endif %}

<section class="relative" x-data="{isMobile: false}" x-init="isMobile = window.innerWidth < 768 ? true : false">
  <!-- Hero Section -->
  <section id="hero" class="bg-no-repeat bg-cover bg-center h-[650px]  {% if screen_width == 'max-w-screen-xl' %}  md:h-[600px] {% else %}  md:h-[360px] {%- endif -%}"
    :style="isMobile ? 'background-image: url({{ page.settings.hero_image_mobile_url | default: default_hero_image }}' : 'background-image: url({{ page.settings.hero_image_url | default: default_hero_image }}'">

    {% render 'header2', screen_width: screen_width, page: page %}

    <!-- hero -->
    <div class="mx-auto {{ screen_width }}  px-8 my-4 md:px-12">
      <div class="flex flex-col flex-grow justify-center items-start mt-4 space-y-4 max-w-3xl md:mt-44">
        <h1 class="text-2xl font-semibold text-white transition duration-500 md:text-4xl md:mt-0 text-shadow" style="color: {{ page.settings.text_color | default: '#ffffff' }};">
          {{ page.settings.title }}
        </h1>
        <p class="max-w-xl text-white transition duration-500" style="color: {{ page.settings.text_color | default: '#ffffff' }};">{{ page.settings.description }}</p>

        <div class="flex z-0 flex-col justify-start items-start w-full md:w-2/3">
          {% form_tag 'search', class: 'w-full' %}
            <div class="relative rounded-2xl shadow-sm">
              <button type="submit" class="flex absolute inset-y-0 right-0 items-center pr-3 pl-4 sm:right-auto">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-[#3F3636]" fill="none" viewBox="0 0 24 24" stroke="currentColor" > <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /> </svg>
              </button>
              <input
            type="text"
            name="{{form.keywords_field_name}}" value="{{ search.keywords | escape_once }}"
            placeholder="{{ "placeholders.search" | t }}"
            autocomplete="off"
            class="block pr-10 pl-3 w-full h-10 bg-white bg-opacity-75 rounded border border-transparent transition duration-300 ease-in-out outline-none md:h-12 lg:h-14 dark:text-primary focus:ring-0 focus:border-primary sm:pl-12 sm:text-lg focus:bg-opacity-90"
              >
            </div>
          {% endform_tag %}

          <!-- 热门标签 -->
          {% if page.settings.tags.size > 0 %}
            <div class="hidden flex-wrap justify-start items-center mt-4 w-full md:flex">
              <div class="inline-block">
            <span class="mr-3 text-white">{{ 'generic.tags' | t }}：</span>
            {% for tag in page.settings.tags %}
              <a
                href="{{ tag.path }}"
                data-turbo-frame="_top"
                class="mr-3 text-white hover:text-primary focus:ring hover:-translate-y-[2px] min-w-12"
              >
                {{ tag.name }}
              </a>
            {% endfor %}
              </div>
            </div>
          {% endif %}

          <!-- 热门搜索 -->
          {% if page.settings.hot_tags %}
            <div class="hidden justify-start items-center mt-4 w-full md:flex">
              <div class="inline-block">
            <span class="mr-3 text-white">{{ 'generic.popular_search' | t }}:</span>
            {% for search_hot_key in hot_tags %}
             <a
                href="{{site.index_path}}-/search?q={{ search_hot_key }}"
                class="inline-block px-4 py-2 text-sm font-medium text-gray-700 rounded-full transition-all duration-200 hover:scale-105 focus:ring-2 focus:ring-primary focus:ring-offset-2
                {% cycle 'bg-blue-50 hover:bg-blue-100 border border-blue-200', 'bg-green-50 hover:bg-green-100 border border-green-200', 'bg-purple-50 hover:bg-purple-100 border border-purple-200', 'bg-amber-50 hover:bg-amber-100 border border-amber-200' %}"
              >
                {{ search_hot_key }}
              </a>
            {% endfor %}
              </div>
            </div>
          {% endif %}

        </div>
      </div>
    </div>
  </section>

  <!-- Channel Section -->
  {% if site.settings.show_channel_section %}
    {% assign channel_pages = site.pages['/'].children_in_list  | limit: 50 %}
    <section class="bg-transparent">
      <div class="mx-auto {{ screen_width }} px-4 my-4 sm:px-6">
        {% if page.settings.channel_one_name %}
          <div class="flex items-center mb-4 h-8 text-2xl font-bold text-slate-800 dark:text-slate-200">
            <div class="mr-3 w-1 h-full bg-primary"></div>
            <span>{{ page.settings.channel_one_name }}</span>
          </div>
        {% endif %}
        <div class="grid grid-cols-2 gap-3 items-start lg:max-w-none md:grid-cols-6 lg:grid-cols-8 lg:gap-2">
            {% for channel_page in channel_pages %}
              <a href="{{ channel_page.path }}" data-turbo="false" class="flex overflow-hidden flex-col items-center px-2 py-4 h-full text-center bg-white rounded-md text-md hover:bg-blue-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200">
                {% if channel_page.settings.icon %}
                  <span class=""><img src="{{ channel_page.settings.icon | default: default_icon }}" class="h-8"/> </span>
                {% else %}
                  <span class="">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8 size-8 text-primary">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122" />
                    </svg>
                  </span>
                {% endif %}
                <h3 class="mt-1 line-clamp-1">{{ channel_page.link_text }}</h3>
              </a>
            {% endfor %}
          </div>
      </div>
    </section>
  {% endif %}

  <!-- Newest Section -->
  {% if site.settings.show_newest_section %}
    {% assign newest_pages = site.pages['/'].pages_in_list | order_by: '-created_at' | limit: 10 %}
    <section class="bg-transparent">
      <div class="mx-auto {{ screen_width }} px-4 my-4 sm:px-6">
        <div class="pt-4 pb-4">
          <div class="flex items-center mb-4 h-8 text-2xl font-bold text-slate-800 dark:text-slate-200">
            <div class="mr-3 w-1 h-full bg-primary"></div>
            <span>{{ 'generic.newest_pages' | t }}</span>
          </div>

          <div class="grid overflow-hidden grid-cols-1 gap-4 gap-y-4 bg-white rounded-md md:grid-cols-2 dark:bg-slate-800 text-slate-800 dark:text-slate-200">
            {% for sub_page in newest_pages %}
              <a class="flex justify-between items-center transition transform group" data-turbo="false"
                href="{{ sub_page.path }}">
                <div class="flex">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-400 transition group-hover:text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                  </svg>
                  <h6 class="ml-2 transition text-gray-550 group-hover:text-primary">
                    {{ sub_page.link_text }}
                  </h6>
                </div>

                <svg xmlns="http://www.w3.org/2000/svg" class="flex-shrink-0 mr-4 w-5 h-5 text-gray-500 transition group-hover:text-primary group-hover:translate-x-3 md:transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                </svg>
              </a>
            {% endfor %}
          </div>
        </div>
      </div>
    </section>
  {% endif %}

  <!-- Pages Section -->
  <div class="mx-auto {{ screen_width }} px-4 sm:px-6 lg:px-8 py-12">
    <div class="grid grid-cols-1 gap-8 md:grid-cols-3">
      {% for card_page in card_pages %}
        {%  assign sub_pages = card_page.children_in_nav_menu  %}
        {%  assign sub_page_count = sub_pages| size %}
        <!-- Corporate Section -->
        <div class="p-8 bg-gray-50 border-2 border-gray-50">
          <div class="flex flex-row items-start mb-6">
            <div class="mr-3">
              {% if card_page.settings.icon %}
                <img src="{{ card_page.settings.icon }}" alt="{{ card_page.link_text }}" class="w-12 h-12"/>
              {% endif %}
            </div>
            <div class="text-start">
              <h3 class="mb-1 text-xl"><a href="{{ card_page.path | append: '?list=true' }}" class="hover:text-primary" data-turbo="false">{{ card_page.link_text }}</a></h3>
              <p class="text-gray-400">{{ sub_page_count }} {{ 'generic.articles' | t }}</p>
            </div>
          </div>

          <ul class="overflow-x-hidden mb-6 space-y-3">
            {% for sub_page in sub_pages | limit: 5 %}
              {% assign ssub_pages = sub_page.children_in_nav_menu %}
              {% assign ssub_page_count = ssub_pages | size %}
              {% if ssub_page_count > 0 %}
                <li class="flex">
                  <span>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="mr-1 w-5 h-5 size-6">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z" />
                    </svg>
                  </span>
                  <a href="{{ sub_page.path }}" data-turbo="false" class="flex items-center space-x-2 text-gray-600 hover:text-primary">
                    <span class="truncate">{{ sub_page.link_text }}  [{{ ssub_page_count }} {{ 'generic.articles' | t }}] </span>
                  </a>
                </li>
              {%  else %}
                <li class="flex">
                  <span>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="mr-1 w-5 h-5 size-6">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
                    </svg>
                  </span>
                  <a href="{{ sub_page.path }}" data-turbo="false" class="flex items-center space-x-2 text-gray-600 hover:text-primary">
                    <span class="truncate">{{ sub_page.link_text }}</span>
                  </a>
                </li>
              {% endif %}
            {% endfor %}
          </ul>

          <div>
            <a href="{{ card_page.path | append: '?list=true' }}" data-turbo="false" class="inline-flex items-center text-primary hover:text-blue-800">
              {{ 'generic.read_more' | t }}
              <svg xmlns="http://www.w3.org/2000/svg" class="ml-1 w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </a>
          </div>
        </div>
      {% endfor %}

    </div>
  </div>


  <!-- Hottest Section-->
  {% if site.settings.show_hottest_section %}
    {% assign hottest_pages = site.pages['/'].pages_in_list | order_by: '-visits_count' | limit: 10 %}
    <section class="bg-transparent">
      <div class="mx-auto {{ screen_width }} px-4 my-4 sm:px-6">
        <div class="py-4 lg:py-12">

          <div class="flex items-center mb-8 h-8 text-2xl font-bold text-slate-800 dark:text-slate-200">
            <div class="mr-3 w-1 h-full bg-primary"></div>
            <span>{{ 'generic.hot_pages' | t }}</span>
          </div>
          <div class="grid grid-cols-1 gap-4 gap-y-4 md:grid-cols-2">
            {% for faq_page in hottest_pages %}
              <a data-turbo="false" class="flex justify-between items-center transition transform group"
                href="{{ faq_page.path }}">
                <div class="flex">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-400 transition group-hover:text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                  </svg>
                  <h6 class="ml-2 transition text-gray-550 group-hover:text-primary">
                    {{ faq_page.link_text }}
                  </h6>
                </div>

                <svg xmlns="http://www.w3.org/2000/svg" class="flex-shrink-0 mr-4 w-5 h-5 text-gray-500 transition group-hover:text-primary group-hover:translate-x-3 md:transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                </svg>
              </a>
            {% endfor %}
          </div>
        </div>
      </div>
    </section>
  {% endif %}

  <!-- Support 列表 -->
  <section class="py-6 bg-gray-50 sm:py-12">
    <div class="mx-auto {{ screen_width }} px-4">

        <!-- Cards Container -->
        {% render 'support_cards' %}

    </div>
  </section>

</section>

{% comment %} 首页自定义 Footer  {% endcomment %}
<!-- Header Menu -->
{% assign footer_menus = site.settings.footer_menu | newline_to_br | split: '<br />' %}

<footer class="py-4 text-white footer bg-accent">
  <div class="mx-auto {{ screen_width }} px-4 py-4 md:pt-8">
    <div class="grid grid-cols-2 md:grid-cols-4">
      {% for menu_line in footer_menus %}
        {%  assign p_menu_arr = menu_line | split: '{' %}
        {%  assign parent_menu = p_menu_arr[0] | split: '[' %}
        {%  assign sub_menus = p_menu_arr[1] | split: '|' %}
        {%  assign sub_menus_count =  sub_menus | size %}
        {% if sub_menus_count > 0 %}
          <div class="footer-item">
            <div class="relative mb-6 text-lg footer-item-title">{{ parent_menu[0] }}</div>
            <div class="flex flex-col gap-2 text-sm font-light text-gray-400">
              {% for second_menu in sub_menus %}
                {%  assign second_menu_arr = second_menu | split: '[' %}
                <a href="{{ second_menu_arr[1] | default: '#'}}">{{ second_menu_arr[0] }}</a>
              {% endfor %}
            </div>
          </div>
        {% endif %}
      {% endfor %}
      <div class="footer-item">
        <!-- Feature two Section -->
        {% if site.settings.features_two %}
          {{ site.settings.features_two }}
        {% endif %}
      </div>
    </div>

    <div class="flex justify-between pt-4 mt-4 border-t border-gray-600 md:mt-8 md:pt-6">
      <div class="text-sm font-light text-gray-400">
        © {{ site.settings.copyright_info }}
      </div>

    </div>
  </div>
</footer>


{% schema %}
  {
    "name": "Help Center",
    "description": "Ideal for feature-rich product user manuals",
    "thumb_url": "images/theme/index-help-center.png",
    "preview_image_urls": [
      "images/theme/index-help-center.png"
    ],
    "sub_page_templates": ["page"],
    "settings": [
        {
          "id": "hero_image_url",
          "type": "image_picker",
          "ratio": "19:6",
          "width": 900,
          "label": "t:settings_schema.generic.settings.hero_image_url.label",
          "info": "t:settings_schema.generic.settings.hero_image_url.info"
        },
        {
          "id": "hero_image_mobile_url",
          "type": "image_picker",
          "ratio": "6:9",
          "width": 300,
          "label": "t:settings_schema.generic.settings.hero_image_url.label",
          "info": "t:settings_schema.generic.settings.hero_image_url.info"
        },
        {
            "id": "text_color",
            "type": "color",
            "label": "Hero 文字颜色",
            "default": "#ffffff"
        },
        {
          "id": "title",
          "type": "text",
          "label": "Hero Title",
          "default": "👋 What Can We Help?"
        },
        {
          "id": "description",
          "type": "text",
          "label": "Hero description",
          "default": "👋 What Can We Help?"
        },
        {
          "id": "hot_tags",
          "label": "t:settings_schema.generic.settings.hot_tags.label",
          "type": "text",
          "placeholder": "sign in,install,account,how to"
        },
        {
          "id": "tags",
          "type": "tag_picker",
          "multiple": true,
          "label": "t:settings_schema.page.settings.tags.label"
        },
        {
          "id": "index_card_page_count",
          "type": "number",
          "min": 1,
          "max": 20,
          "step": 1,
          "default": 5,
          "label": "首页列表展示页面数量",
          "info": ""
        },
        {
          "id": "channel_one_name",
          "type": "text",
          "label": "版块一名称",
          "default": "栏目导览",
          "info": "版块一显示所有栏目快捷方式"
        },
        {
          "id": "channel_two_name",
          "type": "text",
          "label": "版块二名称",
          "default": "专题推荐",
          "info": "版块二显示所有栏目 Card"
        }
      ]
  }
{% endschema %}